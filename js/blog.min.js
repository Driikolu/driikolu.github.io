jQuery(function(e){'use strict';var t=window._Blog||{};t.toggleMobileMenu=function(){e("#menu-toggle").on("click",()=>{e("#menu-toggle").toggleClass("active"),e("#mobile-menu").toggleClass("active")})},t.toggleTheme=function(){e(".theme-switch").on("click",()=>{e("body").toggleClass("dark-theme"),isDark=!isDark,window.localStorage&&window.localStorage.setItem("theme",isDark?"dark":"light"),this.echarts()})},t.changeTitle=function(){var e=document.title;window.onblur=function(){document.title=e},window.onfocus=function(){document.title=e}},t.dynamicToTop=function(){const t=300;var n=e("#dynamic-to-top");e(window).scroll(()=>{var s=e(window).scrollTop();typeof document.body.style.maxHeight=="undefined"&&n.css({position:"absolute",top:s+e(window).height()-20}),s>t?function(e,t){t=t||"block",e.style.display!==t&&(e.style.opacity=0,e.style.display=t,function n(){var t=parseFloat(e.style.opacity);(t+=.1)>1||(e.style.opacity=t,requestAnimationFrame(n))}())}(document.getElementById("dynamic-to-top")):function(e){e.style.display!=="none"&&(e.style.opacity=1,function t(){(e.style.opacity-=.1)<0?e.style.display="none":requestAnimationFrame(t)}())}(document.getElementById("dynamic-to-top"))})},t.chroma=function(){const e=document.querySelectorAll(".highlight > .chroma");for(let t=0;t<e.length;t++){const n=e[t],s=n.querySelectorAll("pre.chroma > code"),o=s[s.length-1],i=o?o.className.toLowerCase():'';n.className+=" "+i}},t.responsiveTable=function(){const e=document.querySelectorAll(".post-content table");for(let t=0;t<e.length;t++){const n=e[t],s=document.createElement("div");s.className="table-wrapper",n.parentElement.replaceChild(s,n),s.appendChild(n)}},t._refactorToc=function(n){const t=n.children[0];let e=t,s;for(;e.children.length===1&&(s=e.children[0].children[0]).tagName==="UL";)e=s;e!==t&&n.replaceChild(e,t)},t._linkToc=function(){const e=document.querySelectorAll("#TableOfContents a:first-child");for(let t=0;t<e.length;t++)e[t].className+=" toc-link";for(let e=1;e<=6;e++){const t=document.querySelectorAll(".post-content>h"+e);for(let e=0;e<t.length;e++){const n=t[e];n.innerHTML=`<a href="#${n.id}" class="headerlink"></a>${n.innerHTML}`}}},t._initToc=function(){const t=e("#post-toc");if(t.length&&t.css("display")!=="none"){const n=80,l=e("#post-footer"),o=t.position().top,i=e("main").position().top,h=o+i-n,r=function(){const a=e(window).scrollTop(),r=l.position().top-t.height(),c=r+i-n,s={start:{position:"absolute",top:o},process:{position:"fixed",top:n},end:{position:"absolute",top:r}};a<h?t.css(s.start):a>c?t.css(s.end):t.css(s.process)};r();const c=120,s=e(".toc-link"),d=e(".headerlink"),u=e(".post-toc-content li"),a=function(){const n=e(window).scrollTop(),o=e.map(d,function(t){return e(t).offset().top}),i=function(e,t){for(let n=0;n<e.length-1;n++)if(t<e[n+1])return n;return e.length-1},t=i(o,n+c);if(e(s).removeClass("active"),e(u).removeClass("has-active"),t!==-1){e(s[t]).addClass("active");let n=s[t].parentNode;for(;n.tagName!=="NAV";)e(n).addClass("has-active"),n=n.parentNode.parentNode}};a(),this._initTocOnce||(e(window).scroll(r),e(window).scroll(a),this._initTocOnce=!0)}},t.toc=function(){const e=document.getElementById("post-toc");if(e!==null){const n=document.getElementById("TableOfContents");n===null?e.parentNode.removeChild(e):(this._refactorToc(n),this._linkToc(),this._initToc(),window.addEventListener("resize",function(){this.setTimeout(t._initToc,0)},!1))}},t.mermaid=function(){if(window.mermaidMap){const e=mermaid.mermaidAPI;Object.keys(mermaidMap).forEach(t=>{const n=document.getElementById(t);e.render("d"+t,mermaidMap[t],e=>{n.innerHTML=e;const t=n.firstChild;t.style.width="100%"},n)})}},t.echarts=function(){if(window.echartsMap){for(let e=0;e<echartsArr.length;e++)echartsArr[e].dispose();echartsArr=[],Object.keys(echartsMap).forEach(e=>{let t=echarts.init(document.getElementById(e),window.isDark?"dark":"macarons",{renderer:"svg"});t.setOption(echartsMap[e]),echartsArr.push(t)}),window.addEventListener("resize",function(){this.setTimeout(()=>{for(let e=0;e<echartsArr.length;e++)echartsArr[e].resize()},0)},!1)}},t.countdown=function(){window.countdownMap&&Object.keys(countdownMap).forEach(function(t){e(`#${t}`).countdown(countdownMap[t].date,{elapse:!0}).on("update.countdown",function(n){e(this).html(n.strftime(countdownMap[t].pattern))})})},t.typeit=function(){if(window.typeitArr)for(let t=0;t<typeitArr.length;t++){const e=typeitArr[t];(function s(t){const n=document.getElementById(`r${e[t]}`).innerHTML;if(t===e.length-1){new TypeIt(`#${e[t]}`,{strings:n}).go();return}let o=new TypeIt(`#${e[t]}`,{strings:n,afterComplete:()=>{o.destroy(),s(t+1)}}).go()})(0)}},e(document).ready(()=>{t.toggleMobileMenu(),t.toggleTheme(),t.changeTitle(),t.dynamicToTop(),t.chroma(),t.responsiveTable(),t.mermaid(),t.echarts(),t.countdown(),t.typeit(),t.toc()})})